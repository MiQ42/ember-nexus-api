# Best Practices

As Ember Nexus internally uses Symfony, it also uses
[Symfony's best practices](https://symfony.com/doc/current/best_practices.html).

## Language

The source code of Ember Nexus and responses generated by Ember Nexus API should be only written in **English**.

There are two reasons for it:

- Search engines more easily find exceptions returned in a single language, helping with debugging and general
  usability.
- As English is the Lingua Franca of the IT industry, it should be the primary language used in this project.

Documentations and general user guides should always be available in English, and additional translations or regional
adaptations can be created.  
It should be noted that Ember Nexus strives towards long-term stability; i.e., it is better not to support language X
than to shortly abandon language X after trial usage.

When deciding between using the active vs. passive voice, asking the following question helps:

> Is it an advantage for the reader to know the performer of the action?

If the answer is Yes, use active voice. If the answer is No, use passive voice.

See [Technical Writing: Active vs. Passive voice](https://medium.com/@DaphneWatson/technical-writing-active-vs-passive-voice-485dfaa4e498)
for details.

## Coding Style

Ember Nexus API tries to implement object-orientated code with patterns where it makes sense. Duplicate code should be
reduced if the code's complexity is similar.  
Using easily readable code is better than using the least amount of lines
or highly optimized code.

Refactoring parts of the source code is always possible as long as code changes are covered by unit tests and existing
feature tests are passed.

Try to keep the line length below 120 chars.

## Logging and Exceptions

Both log messages and exceptions should adhere to a few key principles:

- Messages should provide context why they are created.
- Messages should provide one specific reason, ideally a unique property or identifier.
- Messages should not contain sensitive data like passwords, hashes, and tokens.
- Messages are sentences, they end with a dot.

Log messages should be created in the following scenarios:

- Important events in the lifetime of the API should be documented. This includes startup, shutdown, and backups.
- Security events like creating or updating users and tokens should always be logged. If possible, use the
  user's unique identifier for context.
- Administrative actions should be fully logged:
  - Interactions with the command line.
  - Interactions with the API through users with administrative access.

Exceptions should be created in the following instances:

- If input validation returns an error.
- If an action is forbidden, likely due to missing security privileges.
- If the requested data does not exist.
- If there is a logic conflict.
- In other problematic instances.
