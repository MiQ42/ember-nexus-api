<!-- index.html -->

<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta charset="UTF-8" />
    <link
      rel="stylesheet"
      href="//cdn.jsdelivr.net/npm/docsify@4/themes/vue.css"
    />
    <link rel="stylesheet" href="./assets/custom.css" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="./assets/favicon/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./assets/favicon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="./assets/favicon/favicon-16x16.png"
    />
    <link rel="manifest" href="./assets/favicon/site.webmanifest" />
    <link
      rel="mask-icon"
      href="./assets/favicon/safari-pinned-tab.svg"
      color="#d82739"
    />
    <link rel="shortcut icon" href="./assets/favicon/favicon.ico" />
    <meta name="msapplication-TileColor" content="#d82739" />
    <meta
      name="msapplication-config"
      content="./assets/favicon/browserconfig.xml"
    />
    <meta name="theme-color" content="#d82739" />
  </head>
  <body>
    <div id="app"></div>
    <script>
      window.$docsify = {
        loadSidebar: true,
        subMaxLevel: 2,
        loadNavbar: true,
        themeColor: '#d82739',
        executeScript: true,
        mermaidConfig: {
          querySelector: ".mermaid"
        }
      };
    </script>
    <script src="//cdn.jsdelivr.net/npm/docsify@4"></script>
    <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-bash.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-json.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-cypher.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-yaml.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/raphael@2.3.0/raphael.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@antv/g6@4.8.10/dist/g6.min.js"></script>
    <script type="module">
      import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
      mermaid.initialize({ startOnLoad: true });
      window.mermaid = mermaid;
    </script>
    <script src="//unpkg.com/docsify-mermaid@2.0.0/dist/docsify-mermaid.js"></script>
    <script>
      function renderGraph(container, data, direction = "LR"){
        const graph = new G6.Graph({
          container: container,
          width: container.offsetWidth,
          height: container.offsetHeight,
          modes: {
            default: ['drag-canvas', 'zoom-canvas']
          },
          layout: {
            type: 'dagre',
            controlPoints: true,
            rankdir: direction,
            align: 'UL',
            nodesep: 60,
            ranksep: 50,
          },
          fitView: true,
          maxZoom: 1.5,
          minZoom: 0.5,
          fitViewPadding: [20, 40, 50, 20],
          animate: true,
          defaultNode: {
            type: 'circle',
            size: [80, 80],
            style: {
              fill: '#d82739',
              lineWidth: 0,
            },
            labelCfg: {
              style: {
                fill: '#fff',
                fontSize: 14,
                fontFamily: 'Fira Code'
              },
            },
          },
          defaultEdge: {
            type: 'polyline',
            style: {
              radius: 20,
              offset: 45,
              endArrow: true,
              lineWidth: 2,
              stroke: '#C2C8D5',
            },
            labelCfg: {
              style: {
                fill: '#000',
                fontSize: 14,
                textAlign: 'center',
                textBaseline: 'middle',
                fontFamily: 'Fira Code'
              }
            },
          },
          data
        });
        graph.render();
      }
      let userNode = {label: 'User', style: {fill: '#276ed8'}};
      let dataNode = {label: 'Data'};
      let documentNode = {label: 'Doc', style: {fill: '#d8c527' }, labelCfg: {style: {fill: '#000' } }};
      let redNode = {};
      let yellowNode = {style: {fill: '#d8c527' }, labelCfg: {style: {fill: '#000' } }};
      let groupNode = {label: 'Group', style: {fill: '#27d87b' }, labelCfg: {style: {fill: '#000' } }};
      G6.registerNode('autosize-rect', {
          draw(cfg, group) {
            const labelText = (cfg.label || '');
            const width = G6.Util.getTextSize('-'.repeat(labelText.length + 2), cfg.labelCfg.style.fontSize, {fontFamily: 'Fira Code'})[0];
            const height = 50;
            const shape = group.addShape('rect', {
              attrs: {
                x: -width / 2,
                y: -height / 2,
                width: width,
                height: height,
                fill: cfg.style.fill
              },
              name: 'rect-shape'
            });
            group.addShape('text', {
              attrs: {
                x: 0,
                y: 0,
                textAlign: 'center',
                textBaseline: 'middle',
                text: labelText,
                fill: cfg.labelCfg.style.fill,
                fontSize: cfg.labelCfg.style.fontSize,
                fontFamily: 'Fira Code'
              },
              name: 'text'
            });
            return shape;
          }
        }
      );
      G6.registerNode('autosize-flat-hexagon', {
        draw(cfg, group) {
          const hexWidth = 50;
          const hexHeight = hexWidth * Math.sqrt(3) / 2;
          const labelText = (cfg.label || '');
          const width = G6.Util.getTextSize('-'.repeat(Math.max(labelText.length - 2, 0)), cfg.labelCfg.style.fontSize, {fontFamily: 'Fira Code'})[0];

          const shape = group.addShape('polygon', {
            attrs: {
              points: [
                [(-hexWidth / 2) - width / 2, 0],
                [(-hexWidth / 4) - width / 2, -hexHeight / 2],
                [(hexWidth / 4) + width / 2, -hexHeight / 2],
                [(hexWidth / 2) + width / 2, 0],
                [(hexWidth / 4) + width / 2, hexHeight / 2],
                [(-hexWidth / 4) - width / 2, hexHeight / 2]
              ],
              fill: cfg.style.fill,
            },
            name: 'polygon-shape',
          });
          group.addShape('text', {
            attrs: {
              x: 0,
              y: 0,
              textAlign: 'center',
              textBaseline: 'middle',
              text: labelText,
              fill: cfg.labelCfg.style.fill,
              fontSize: cfg.labelCfg.style.fontSize,
              fontFamily: 'Fira Code'
            },
            name: 'text'
          });
          return shape;
        }
      });
    </script>
  </body>
</html>
